# 语义化版本 (Semver) 指南

## 版本格式

```
MAJOR.MINOR.PATCH
  │     │     └── 补丁版本：向后兼容的 bug 修复
  │     └──────── 次版本：向后兼容的新功能
  └────────────── 主版本：不兼容的 API 变更
```

## 版本升级规则

### MAJOR (主版本)

**何时升级**: 有破坏性变更（Breaking Changes）

- 删除或重命名公共 API
- 更改函数签名或返回值格式
- 移除已废弃的功能
- 不兼容的依赖升级

**示例**: `1.2.3` → `2.0.0`

### MINOR (次版本)

**何时升级**: 添加向后兼容的新功能

- 新增 API 或功能
- 添加新的可选参数
- 废弃（但不移除）现有功能

**示例**: `1.2.3` → `1.3.0`

### PATCH (补丁版本)

**何时升级**: 向后兼容的 bug 修复

- 修复 bug
- 性能优化
- 内部重构（不影响 API）
- 文档更新

**示例**: `1.2.3` → `1.2.4`

## 从 Commit 判断版本类型

```
Commit Message                        → 版本类型
─────────────────────────────────────────────────
feat!: ...                           → MAJOR
feat: ... BREAKING CHANGE: ...       → MAJOR
任何含 BREAKING CHANGE 的提交          → MAJOR
─────────────────────────────────────────────────
feat: ...                            → MINOR
feat(scope): ...                     → MINOR
─────────────────────────────────────────────────
fix: ...                             → PATCH
perf: ...                            → PATCH
refactor: ...                        → PATCH
build: ...                           → PATCH
其他类型                               → PATCH 或不升级
```

## 预发布版本

```
1.0.0-alpha    # Alpha 版本
1.0.0-beta.1   # Beta 版本
1.0.0-rc.1     # Release Candidate
```

## 初始开发 (0.x.x)

- `0.x.x` 版本表示初始开发阶段
- API 不稳定，可能随时变更
- 从 `0.1.0` 开始
- 准备好发布时升级到 `1.0.0`

## 最佳实践

1. **永远不要修改已发布的版本**
2. **一次发布只升级一种版本号**
3. **PATCH 重置为 0 当 MINOR 升级时**
4. **MINOR 和 PATCH 重置为 0 当 MAJOR 升级时**
5. **使用 `v` 前缀作为 tag**: `v1.2.3`

## 快速参考

| 变更类型 | 版本升级 | 示例 |
|---------|---------|------|
| 破坏性 API 变更 | MAJOR | 1.2.3 → 2.0.0 |
| 新增功能 | MINOR | 1.2.3 → 1.3.0 |
| Bug 修复 | PATCH | 1.2.3 → 1.2.4 |
| 文档/测试 | 通常不升级 | - |
